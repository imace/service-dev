@startuml

title 调度模块更新排行榜

(*)-->"取滑动窗口大小"
if "是否为0" then
-->[false]"设置窗口大小为7"
endif
-->"读取虚拟下载量和更新时间"
if "是否有虚拟量" then
-->[false]"累加窗口内的实际下载量"
-->"用累加结果更新排行表"
elseif
-->[true]"读取虚拟下载量"


if "是否过期" then
-->[true]"读取实际下载量"
-->"计算过期天数"

if "是否大于滑动窗口" then
-->[true]"累加窗口内的实际下载量"
-->"用累加结果更新排行表"
elseif
-->[false]"计算过期内的实际下载总量"
-->"计算未过期的的虚拟下载量下载总量"
-->"用实际与虚拟下载总量和更新排行表"
endif


elseif
-->[false]"累加窗口内的虚拟下载量"
-->"用累加结果更新排行表"
endif

endif



@emduml